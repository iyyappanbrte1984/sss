<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ocean Explorer Pro ‚Äî SMART VISION</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root{
      --ocean-900:#032735; --ocean-700:#0b74de; --ocean-500:#39a1ff;
      --bg:#f4f9ff; --card:#ffffff; --muted:#6f8396;
      --ok:#1eae60; --warn:#f5a623; --bad:#e63946;
      --pace-purple:#6c5ce7; --pace-blue:#0984e3; --pace-green:#00b894;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{font-family:"Poppins",sans-serif;background:var(--bg);color:var(--ocean-900);height:100%;}
    body{display:flex;flex-direction:column;}

    nav{
      position:sticky;top:0;z-index:1000;
      display:flex;justify-content:center;gap:24px;padding:12px 24px;
      background:linear-gradient(90deg,#0077be,#00a8e8);
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    nav a{
      color:#fff;text-decoration:none;font-weight:700;font-size:16px;
      padding:8px 20px;border-radius:999px;transition:all .3s;
    }
    nav a:hover{background:rgba(255,255,255,0.2);transform:translateY(-2px);}

    .hero-header{
      padding:28px 16px 20px;text-align:center;
      background:linear-gradient(135deg,#005fa3,#00a8e8,#39a1ff);
      color:#fff;box-shadow:0 8px 24px rgba(0,0,0,0.15);
    }
    .hero-header h1{font-size:30px;font-weight:900;letter-spacing:.06em;margin-bottom:6px;}
    .hero-header p{font-size:14px;opacity:.96;}

    main.wrap{
      max-width:1400px;margin:24px auto 30px;padding:0 20px;flex:1;width:100%;
      display:flex;flex-direction:column;gap:16px;
    }

    .layout{
      display:grid;grid-template-columns:340px 1fr;gap:18px;
    }
    @media(max-width:1000px){
      .layout{grid-template-columns:1fr;}
      .side-panel{order:2;}
    }

    .side-panel{
      background:#fff;border-radius:16px;padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,0.06);
      border:1px solid rgba(0,119,190,0.08);
      max-height:700px;overflow-y:auto;
    }
    .side-panel h2{
      font-size:18px;margin-bottom:10px;color:var(--ocean-900);
    }
    .side-panel small{color:var(--muted);font-size:12px;}

    .layer-group{margin-top:14px;}
    .layer-group h3{
      font-size:13px;text-transform:uppercase;
      letter-spacing:.08em;color:var(--muted);margin-bottom:6px;
    }
    .layer-item{
      display:flex;align-items:center;justify-content:space-between;
      margin-bottom:8px;font-size:13px;padding:6px 8px;border-radius:8px;
      transition:background .2s;
    }
    .layer-item:hover{background:#f9fbff;}
    .layer-item label{display:flex;align-items:center;gap:8px;cursor:pointer;flex:1;}
    .layer-chip{
      width:10px;height:10px;border-radius:50%;flex-shrink:0;
    }
    .chip-nasa-chl{background:#00b894;}
    .chip-nasa-sst{background:#ff7675;}
    .chip-noaa-sst{background:#fd79a8;}
    .chip-plastic{background:#e63946;}
    .chip-currents{background:#0984e3;}
    .chip-turb{background:#6c5ce7;}
    .chip-mpa{background:#fdcb6e;}

    .source-tag{
      font-size:10px;background:#eef6fb;padding:2px 6px;border-radius:4px;
      margin-left:4px;color:#0b74de;font-weight:600;
    }

    #map{
      width:100%;height:600px;
      border-radius:16px;overflow:hidden;
      box-shadow:0 10px 30px rgba(0,0,0,0.06);
      border:1px solid rgba(0,119,190,0.08);
    }

    .controls-bar{
      margin-top:10px;
      display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;
      gap:10px;font-size:12px;
    }
    .slider-wrap{
      display:flex;align-items:center;gap:8px;
      background:#fff;border-radius:999px;
      padding:8px 14px;
      box-shadow:0 8px 20px rgba(0,0,0,0.05);
      border:1px solid rgba(0,119,190,0.08);
    }
    .slider-wrap input[type="range"]{width:180px;}
    .badge{
      display:inline-block;padding:4px 10px;border-radius:999px;
      font-size:11px;font-weight:600;
    }
    .badge-ok{background:rgba(30,174,96,0.12);color:var(--ok);}
    .badge-warn{background:rgba(245,166,35,0.12);color:var(--warn);}
    .badge-bad{background:rgba(230,57,70,0.12);color:var(--bad);}

    .btn{
      padding:8px 14px;border-radius:8px;border:none;font-weight:700;font-size:13px;
      cursor:pointer;transition:all .3s;
      background:linear-gradient(135deg,#39a1ff,#0b74de);color:#fff;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(11,116,222,.3);}

    .popup-content{font-size:13px;line-height:1.6;}
    .popup-content strong{display:block;margin-bottom:4px;color:var(--ocean-900);}

    .legend-box{
      background:#fff;padding:10px;border-radius:8px;
      box-shadow:0 4px 12px rgba(0,0,0,0.08);
      font-size:11px;max-width:300px;
    }
    .legend-item{display:flex;align-items:center;gap:6px;margin-bottom:4px;}
    .legend-color{width:14px;height:14px;border-radius:3px;}

    @keyframes pulse{
      0%,100%{opacity:1;transform:scale(1);}
      50%{opacity:0.8;transform:scale(1.05);}
    }
    .live-indicator{
      display:inline-block;width:8px;height:8px;background:#00b894;
      border-radius:50%;animation:pulse 2s infinite;
      margin-left:6px;
    }

    /* PACE AI Analysis Section */
    .pace-section{
      margin-top:40px;padding:0;
    }
    .pace-header{
      display:flex;align-items:center;justify-content:space-between;
      padding:30px;background:linear-gradient(135deg,#667eea,#764ba2);
      border-radius:16px 16px 0 0;color:#fff;
    }
    .pace-header-left{display:flex;align-items:center;gap:16px;}
    .pace-logo{
      width:60px;height:60px;background:rgba(255,255,255,0.2);
      border-radius:12px;display:flex;align-items:center;justify-content:center;
      font-size:24px;font-weight:900;backdrop-filter:blur(10px);
    }
    .pace-title h2{font-size:24px;margin-bottom:4px;}
    .pace-title p{font-size:13px;opacity:0.9;}

    .pace-content{
      background:#fff;border-radius:0 0 16px 16px;
      box-shadow:0 10px 30px rgba(0,0,0,0.1);
      padding:30px;
    }

    /* Question Cards */
    .question-grid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:16px;margin-bottom:30px;
    }
    .question-card{
      background:linear-gradient(135deg,#f9fbff,#ffffff);
      border:2px solid rgba(108,92,231,0.15);
      border-radius:12px;padding:18px;cursor:pointer;
      transition:all .3s;position:relative;overflow:hidden;
    }
    .question-card:hover{
      transform:translateY(-4px);
      box-shadow:0 12px 24px rgba(108,92,231,0.2);
      border-color:#6c5ce7;
    }
    .question-card::before{
      content:'';position:absolute;top:0;left:0;right:0;height:4px;
      background:linear-gradient(90deg,#667eea,#764ba2,#f093fb);
      opacity:0;transition:opacity .3s;
    }
    .question-card:hover::before{opacity:1;}
    .question-icon{font-size:28px;margin-bottom:10px;}
    .question-card h4{font-size:14px;margin-bottom:6px;color:var(--ocean-900);}
    .question-card p{font-size:12px;color:var(--muted);line-height:1.5;}

    /* AI Response Area */
    .ai-response-area{
      background:linear-gradient(135deg,#f9fbff,#fff);
      border:2px solid rgba(108,92,231,0.2);
      border-radius:12px;padding:24px;min-height:200px;
      position:relative;
    }
    .ai-thinking{
      text-align:center;padding:40px;color:var(--muted);
    }
    .ai-thinking-icon{
      font-size:48px;animation:pulse 1.5s infinite;margin-bottom:12px;
    }

    .ai-answer{
      animation:slideIn 0.5s ease-out;
    }
    @keyframes slideIn{
      from{opacity:0;transform:translateY(20px);}
      to{opacity:1;transform:translateY(0);}
    }

    .ai-answer-header{
      display:flex;align-items:center;gap:10px;margin-bottom:16px;
      padding-bottom:12px;border-bottom:2px solid rgba(108,92,231,0.1);
    }
    .ai-badge{
      padding:6px 12px;background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;border-radius:6px;font-size:11px;font-weight:700;
    }
    .ai-answer-title{font-size:18px;font-weight:700;color:#6c5ce7;}

    .ai-answer-body{
      font-size:14px;line-height:1.8;color:var(--ocean-900);
    }
    .ai-answer-body p{margin-bottom:12px;}
    .ai-answer-body strong{color:#6c5ce7;}
    .ai-answer-body ul{margin:12px 0;padding-left:20px;}
    .ai-answer-body li{margin-bottom:8px;}

    .ai-metrics-grid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:12px;margin:20px 0;
    }
    .ai-metric-card{
      background:rgba(108,92,231,0.08);border-radius:8px;padding:14px;
      text-align:center;
    }
    .ai-metric-value{
      font-size:24px;font-weight:900;color:#6c5ce7;margin-bottom:4px;
    }
    .ai-metric-label{font-size:11px;color:var(--muted);text-transform:uppercase;}

    .ai-footer{
      margin-top:20px;padding-top:16px;border-top:1px solid rgba(108,92,231,0.1);
      display:flex;align-items:center;justify-content:space-between;
      flex-wrap:wrap;gap:10px;
    }
    .ai-source{font-size:11px;color:var(--muted);}
    .ask-another{
      padding:8px 16px;background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff;border:none;border-radius:6px;font-weight:700;
      cursor:pointer;font-size:12px;transition:all .3s;
    }
    .ask-another:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(102,126,234,0.3);}

    @keyframes gradient{
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }
    .loading-gradient{
      background:linear-gradient(270deg,#667eea,#764ba2,#f093fb);
      background-size:600% 600%;
      animation:gradient 3s ease infinite;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="live-demo.html">Live Demo</a>
    <a href="marine-dashboard.html">Marine AI Dashboard</a>
    <a href="ocean-explorer.html">Ocean Explorer</a>
    <a href="ocean-explorer-pro.html">Ocean Explorer Pro</a>
    <a href="pollution-pathways.html">Pollution Pathways</a>
    <a href="biodiversity-awareness.html">Red List & Self‚ÄëAssessment</a>
    <a href="sdg-dashboard.html">SDG & Biodiversity</a>
    <a href="presentation-mode.html">Presentation Mode</a>   
  </nav>

  <header class="hero-header">
    <h1>OCEAN EXPLORER PRO<span class="live-indicator"></span></h1>
    <p>Real-time NASA/NOAA satellite data + AI-powered ocean analysis</p>
  </header>

  <main class="wrap">
    <div class="layout">
      <aside class="side-panel">
        <h2>Live Satellite Layers</h2>
        <small>Toggle real-time data from NASA GIBS, NOAA, and other sources. Click map for AI analysis.</small>

        <div class="layer-group">
          <h3>üõ∞Ô∏è NASA Earth Data</h3>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-nasa-chl"></span>
              <span>Chlorophyll Concentration<span class="source-tag">NASA MODIS</span></span>
            </label>
            <input type="checkbox" id="layerNasaChl" />
          </div>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-nasa-sst"></span>
              <span>Sea Surface Temp (Day)<span class="source-tag">NASA VIIRS</span></span>
            </label>
            <input type="checkbox" id="layerNasaSst" />
          </div>
        </div>

        <div class="layer-group" style="margin-top:12px;">
          <h3>üåä NOAA Ocean Data</h3>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-noaa-sst"></span>
              <span>NOAA SST (Night)<span class="source-tag">NOAA-20</span></span>
            </label>
            <input type="checkbox" id="layerNoaaSst" />
          </div>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-currents"></span>
              <span>Ocean Currents Overlay<span class="source-tag">OSCAR</span></span>
            </label>
            <input type="checkbox" id="layerCurrents" />
          </div>
        </div>

        <div class="layer-group" style="margin-top:12px;">
          <h3>üåç Environmental Layers</h3>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-plastic"></span>
              <span>Plastic Pollution Zones<span class="source-tag">Model</span></span>
            </label>
            <input type="checkbox" id="layerPlastic" />
          </div>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-turb"></span>
              <span>Turbidity / Sediment<span class="source-tag">Sentinel</span></span>
            </label>
            <input type="checkbox" id="layerTurb" />
          </div>

          <div class="layer-item">
            <label>
              <span class="layer-chip chip-mpa"></span>
              <span>Marine Protected Areas<span class="source-tag">WDPA</span></span>
            </label>
            <input type="checkbox" id="layerMpa" />
          </div>
        </div>

        <div style="margin-top:16px;font-size:12px;color:var(--muted);">
          Overall ocean health:
          <span id="healthBadge" class="badge badge-ok">HEALTHY</span>
        </div>

        <div style="margin-top:12px;">
          <button class="btn" id="btnAnalyze" style="width:100%;">Click Map for AI Analysis</button>
        </div>
      </aside>

      <section>
        <div id="map"></div>

        <div class="controls-bar">
          <div class="slider-wrap">
            <span style="font-weight:600;font-size:11px;">DATE</span>
            <input type="range" id="dateSlider" min="0" max="7" value="0" />
            <span id="dateLabel">Today</span>
          </div>

          <div class="legend-box">
            <div style="font-weight:600;margin-bottom:6px;">üå®Ô∏è Live Data Legend</div>
            <div class="legend-item">
              <div class="legend-color" style="background:#00b894;"></div>
              <span>High Chlorophyll (productive waters)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background:#ff7675;"></div>
              <span>Warm SST (thermal stress)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background:#e63946;"></div>
              <span>Plastic accumulation zones</span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- NASA PACE AI Analysis Section -->
    <section class="pace-section">
      <div class="pace-header">
        <div class="pace-header-left">
          <div class="pace-logo">üõ∞Ô∏è</div>
          <div class="pace-title">
            <h2>Ask NASA PACE AI</h2>
            <p>Hyperspectral ocean analysis powered by AI ‚Ä¢ Launched Feb 2024</p>
          </div>
        </div>
      </div>

      <div class="pace-content">
        <h3 style="margin-bottom:16px;font-size:16px;color:var(--ocean-900);">
          ü§ñ What would you like to know about PACE ocean data?
        </h3>

        <div class="question-grid">
          <div class="question-card" data-question="phytoplankton">
            <div class="question-icon">ü¶†</div>
            <h4>Phytoplankton Detection</h4>
            <p>How does PACE identify different phytoplankton species from space?</p>
          </div>

          <div class="question-card" data-question="hab">
            <div class="question-icon">‚ò¢Ô∏è</div>
            <h4>Harmful Algal Blooms</h4>
            <p>Can PACE predict red tide and toxic algae blooms before they happen?</p>
          </div>

          <div class="question-card" data-question="carbon">
            <div class="question-icon">üå°Ô∏è</div>
            <h4>Ocean Carbon Cycle</h4>
            <p>How does PACE track CO‚ÇÇ absorption by ocean phytoplankton?</p>
          </div>

          <div class="question-card" data-question="hyperspectral">
            <div class="question-icon">üåà</div>
            <h4>Hyperspectral Power</h4>
            <p>What's the advantage of 200+ wavelengths vs traditional satellites?</p>
          </div>

          <div class="question-card" data-question="coastal">
            <div class="question-icon">üèñÔ∏è</div>
            <h4>Coastal Water Quality</h4>
            <p>How does PACE monitor turbid rivers, estuaries, and nearshore zones?</p>
          </div>

          <div class="question-card" data-question="climate">
            <div class="question-icon">üåç</div>
            <h4>Climate Impact</h4>
            <p>Why is PACE critical for understanding climate change and ocean health?</p>
          </div>
        </div>

        <div class="ai-response-area" id="aiResponseArea">
          <div class="ai-thinking">
            <div class="ai-thinking-icon">üí≠</div>
            <p><strong>Click any question card above</strong></p>
            <p style="font-size:12px;margin-top:8px;">AI will analyze NASA PACE data and provide detailed insights</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Map init
    const map = L.map('map', {
      center: [11.5, 78.2],
      zoom: 6,
      worldCopyJump: true
    });

    // Base map
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
      maxZoom: 18,
      attribution: '¬© OpenStreetMap | NASA GIBS | NOAA | PACE'
    }).addTo(map);

    // NASA GIBS layers
    const nasaChlLayer = L.tileLayer(
      'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/MODIS_Aqua_Chlorophyll_A/default/{time}/{tilematrixset}/{z}/{y}/{x}.png',
      {
        tilematrixset: 'GoogleMapsCompatible_Level9',
        time: getGibsDateString(0),
        opacity: 0.7,
        attribution: 'NASA GIBS MODIS Aqua'
      }
    );

    const nasaSstLayer = L.tileLayer(
      'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/VIIRS_SNPP_SST/default/{time}/{tilematrixset}/{z}/{y}/{x}.png',
      {
        tilematrixset: 'GoogleMapsCompatible_Level7',
        time: getGibsDateString(0),
        opacity: 0.6,
        attribution: 'NASA GIBS VIIRS SST'
      }
    );

    const noaaSstLayer = L.tileLayer(
      'https://gibs.earthdata.nasa.gov/wmts/epsg3857/best/MODIS_Terra_L3_SST_MidIR_4km_Night_Daily/default/{time}/{tilematrixset}/{z}/{y}/{x}.png',
      {
        tilematrixset: 'GoogleMapsCompatible_Level7',
        time: getGibsDateString(0),
        opacity: 0.55,
        attribution: 'NOAA via NASA GIBS'
      }
    );

    const currentsLayer = L.tileLayer('https://{s}.tile.stamen.com/toner-lines/{z}/{x}/{y}.png',{opacity: 0.3});
    const plasticLayer = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',{opacity: 0.4});
    const turbLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{opacity: 0.35});
    const mpaLayer = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',{opacity: 0.25});

    function getGibsDateString(daysAgo) {
      const d = new Date();
      d.setDate(d.getDate() - daysAgo);
      return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
    }

    function setupLayerToggle(id, layer) {
      document.getElementById(id).addEventListener('change', (e) => {
        e.target.checked ? layer.addTo(map) : map.removeLayer(layer);
        updateHealthBadge();
      });
    }

    setupLayerToggle('layerNasaChl', nasaChlLayer);
    setupLayerToggle('layerNasaSst', nasaSstLayer);
    setupLayerToggle('layerNoaaSst', noaaSstLayer);
    setupLayerToggle('layerCurrents', currentsLayer);
    setupLayerToggle('layerPlastic', plasticLayer);
    setupLayerToggle('layerTurb', turbLayer);
    setupLayerToggle('layerMpa', mpaLayer);

    // Date slider
    const dateSlider = document.getElementById('dateSlider');
    const dateLabel = document.getElementById('dateLabel');

    function updateDateFromSlider() {
      const daysAgo = parseInt(dateSlider.value, 10) || 0;
      const d = new Date();
      d.setDate(d.getDate() - daysAgo);
      const formatted = `${String(d.getDate()).padStart(2,'0')}-${String(d.getMonth()+1).padStart(2,'0')}-${d.getFullYear()}`;
      
      dateLabel.textContent = daysAgo === 0 ? `Today (${formatted})` : 
                              daysAgo === 1 ? `1 day ago (${formatted})` : 
                              `${daysAgo} days ago (${formatted})`;

      const gibsDate = getGibsDateString(daysAgo);
      [nasaChlLayer, nasaSstLayer, noaaSstLayer].forEach(layer => {
        if (map.hasLayer(layer)) {
          map.removeLayer(layer);
          layer.options.time = gibsDate;
          layer.addTo(map);
        }
      });
    }

    dateSlider.addEventListener('input', updateDateFromSlider);
    updateDateFromSlider();

    // Health badge
    function updateHealthBadge() {
      const score = 
        (document.getElementById('layerNasaSst').checked || document.getElementById('layerNoaaSst').checked ? 1 : 0) +
        (document.getElementById('layerPlastic').checked ? 2 : 0) +
        (document.getElementById('layerTurb').checked ? 1 : 0);

      const badge = document.getElementById('healthBadge');
      if (score >= 3) {
        badge.textContent = 'ALERT';
        badge.className = 'badge badge-bad';
      } else if (score >= 1) {
        badge.textContent = 'WATCH';
        badge.className = 'badge badge-warn';
      } else {
        badge.textContent = 'HEALTHY';
        badge.className = 'badge badge-ok';
      }
    }

    // Map click analysis
    map.on('click', function(e) {
      const lat = e.latlng.lat.toFixed(4);
      const lng = e.latlng.lng.toFixed(4);
      
      const layers = [];
      if (document.getElementById('layerNasaChl').checked) layers.push('High chlorophyll');
      if (document.getElementById('layerNasaSst').checked) layers.push('Elevated SST');
      
      let text = layers.length === 0 ? 
        'Enable satellite layers to see conditions.' :
        `<strong>AI Ocean Analysis</strong><br/>Location: ${lat}¬∞N, ${lng}¬∞E<br/>Indicators: ${layers.join(', ')}<br/><br/>üî¨ PACE hyperspectral analysis available below!`;

      L.popup().setLatLng(e.latlng).setContent(text).openOn(map);
    });

    document.getElementById('btnAnalyze').addEventListener('click', () => {
      alert('üåé Click anywhere on map for AI analysis!\n\nüî¨ For detailed PACE insights, scroll down and click question cards!');
    });

    // PACE AI QUESTION SYSTEM
    const aiResponses = {
      phytoplankton: {
        title: 'Phytoplankton Species Detection',
        content: `
          <p><strong>PACE's Ocean Color Instrument (OCI) is revolutionary</strong> because it measures 200+ continuous wavelengths from 340-890 nanometers ‚Äî like having super-powered color vision!</p>
          
          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">200+</div>
              <div class="ai-metric-label">Wavelengths</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">15+</div>
              <div class="ai-metric-label">Species Types</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">1km</div>
              <div class="ai-metric-label">Resolution</div>
            </div>
          </div>

          <p><strong>How Species Identification Works:</strong></p>
          <ul>
            <li><strong>Diatoms</strong> ‚Äî Silica shells absorb specific wavelengths around 440nm (blue light). PACE sees distinct spectral "fingerprints"</li>
            <li><strong>Cyanobacteria</strong> ‚Äî Blue-green algae have unique pigments (phycocyanin) that reflect strongly at 620nm</li>
            <li><strong>Dinoflagellates</strong> ‚Äî Red tide organisms show characteristic peaks at 675nm due to chlorophyll-c</li>
            <li><strong>Coccolithophores</strong> ‚Äî Calcium carbonate plates scatter light differently, visible in 490-510nm range</li>
          </ul>

          <p><strong>Why This Matters:</strong> Legacy satellites like MODIS only see 7 broad color bands ‚Äî they can measure <em>total biomass</em> but can't tell which species are present. PACE can identify WHO is thriving, not just HOW MUCH plankton exists!</p>
        `,
        source: 'NASA PACE Mission ‚Ä¢ Ocean Color Data'
      },
      hab: {
        title: 'Harmful Algal Bloom Prediction',
        content: `
          <p><strong>YES! PACE is a game-changer for HAB early warning systems.</strong> It detects harmful species BEFORE visible blooms appear at the surface.</p>

          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">3-7</div>
              <div class="ai-metric-label">Days Earlier</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">$82M</div>
              <div class="ai-metric-label">Annual HAB Cost</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">95%</div>
              <div class="ai-metric-label">Detection Accuracy</div>
            </div>
          </div>

          <p><strong>Critical HAB Species PACE Monitors:</strong></p>
          <ul>
            <li><strong>Karenia brevis</strong> (Florida red tide) ‚Äî Produces brevetoxins, kills fish, causes respiratory issues. PACE detects unique 470nm absorption</li>
            <li><strong>Pseudo-nitzschia</strong> (domoic acid) ‚Äî Neurotoxin affects marine mammals. Visible at 650-670nm signature</li>
            <li><strong>Microcystis</strong> (cyanobacteria in lakes) ‚Äî Liver toxin in drinking water. Phycocyanin fluorescence at 620-630nm</li>
            <li><strong>Alexandrium</strong> (paralytic shellfish poisoning) ‚Äî PACE tracks population density via chlorophyll-b peaks</li>
          </ul>

          <p><strong>Prediction Method:</strong> PACE combines hyperspectral data with AI models that recognize "pre-bloom" spectral patterns ‚Äî subtle color changes invisible to human eye or legacy satellites. This gives coastal communities 3-7 days warning to close beaches and shellfish beds!</p>
        `,
        source: 'NOAA HAB Forecasting ‚Ä¢ NASA PACE Applications'
      },
      carbon: {
        title: 'Ocean Carbon Cycle Monitoring',
        content: `
          <p><strong>Oceans absorb 25-30% of human CO‚ÇÇ emissions</strong> ‚Äî phytoplankton are the "lungs of the ocean" performing photosynthesis like plants on land!</p>

          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">50Gt</div>
              <div class="ai-metric-label">C Fixed/Year</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">25%</div>
              <div class="ai-metric-label">Human CO‚ÇÇ</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">1%</div>
              <div class="ai-metric-label">Ocean Biomass</div>
            </div>
          </div>

          <p><strong>How PACE Tracks Carbon:</strong></p>
          <ul>
            <li><strong>Primary Productivity</strong> ‚Äî PACE measures chlorophyll fluorescence (685nm) to calculate photosynthesis rates. More phytoplankton = more CO‚ÇÇ absorbed!</li>
            <li><strong>Particle Size</strong> ‚Äî Hyperspectral data reveals whether carbon is stored in large diatoms (sink to deep ocean) vs small picoplankton (recycled quickly)</li>
            <li><strong>Ocean Color Changes</strong> ‚Äî Greener oceans indicate higher productivity. PACE tracks shifts caused by warming waters and nutrient changes</li>
            <li><strong>Export Flux</strong> ‚Äî Dead phytoplankton falling to seafloor ("biological pump") locks carbon away for centuries. PACE estimates this flux globally</li>
          </ul>

          <p><strong>Climate Connection:</strong> If ocean productivity drops due to warming/acidification, Earth loses a critical CO‚ÇÇ sink. PACE provides early warning by monitoring phytoplankton health in real-time across entire ocean basins!</p>
        `,
        source: 'IPCC Ocean Reports ‚Ä¢ NASA Carbon Monitoring'
      },
      hyperspectral: {
        title: 'Hyperspectral vs Legacy Satellites',
        content: `
          <p><strong>PACE vs MODIS/VIIRS is like upgrading from black-and-white TV to 4K HDR!</strong></p>

          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">7</div>
              <div class="ai-metric-label">MODIS Bands</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">200+</div>
              <div class="ai-metric-label">PACE Bands</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">30x</div>
              <div class="ai-metric-label">More Detail</div>
            </div>
          </div>

          <p><strong>Technical Comparison:</strong></p>
          <ul>
            <li><strong>MODIS Aqua (2002-present)</strong> ‚Äî 7 discrete bands. Can measure total chlorophyll but can't distinguish species. Like seeing "green" without knowing if it's grass, trees, or moss</li>
            <li><strong>VIIRS (2011-present)</strong> ‚Äî 8 ocean color bands. Improved resolution but still limited. Good for biomass, poor for species ID</li>
            <li><strong>PACE OCI (2024-present)</strong> ‚Äî 200+ continuous spectrum. Every 5nm from UV to NIR. Detects subtle absorption/fluorescence features unique to each species</li>
          </ul>

          <p><strong>Real-World Impact:</strong></p>
          <ul>
            <li>üî¨ <strong>Coastal waters</strong> ‚Äî Legacy satellites struggle with turbidity. PACE separates sediment, algae, dissolved organics</li>
            <li>üèñÔ∏è <strong>Beach safety</strong> ‚Äî PACE identifies toxic vs harmless algae. MODIS just sees "bloom"</li>
            <li>üêü <strong>Fisheries</strong> ‚Äî PACE tracks food web base (which plankton support which fish). Legacy satellites can't</li>
            <li>üåä <strong>Climate models</strong> ‚Äî PACE provides species-level data. Carbon models need to know WHO is absorbing CO‚ÇÇ, not just totals</li>
          </ul>
        `,
        source: 'NASA PACE Tech Specs ‚Ä¢ Ocean Optics Literature'
      },
      coastal: {
        title: 'Coastal & Turbid Water Monitoring',
        content: `
          <p><strong>PACE is the first satellite designed specifically to work in murky coastal waters</strong> ‚Äî where 90% of ocean life lives!</p>

          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">90%</div>
              <div class="ai-metric-label">Life in Coastal</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">3x</div>
              <div class="ai-metric-label">Better Accuracy</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">1km</div>
              <div class="ai-metric-label">Nearshore Res</div>
            </div>
          </div>

          <p><strong>The Coastal Challenge:</strong></p>
          <ul>
            <li><strong>Sediment</strong> ‚Äî Rivers dump mud that scatters light. Legacy satellites confuse sediment with algae (both look brownish)</li>
            <li><strong>CDOM</strong> ‚Äî Colored Dissolved Organic Matter from land runoff absorbs blue light. Makes water look yellow/brown even when clean</li>
            <li><strong>Bottom Reflectance</strong> ‚Äî Shallow water reflects seafloor colors. MODIS can't separate bottom from surface water properties</li>
            <li><strong>Sun Glint</strong> ‚Äî Choppy nearshore waters create bright reflections. PACE's polarimeters filter this out</li>
          </ul>

          <p><strong>PACE Solutions:</strong></p>
          <ul>
            <li>üåà <strong>UV bands (340-400nm)</strong> ‚Äî CDOM absorbs UV strongly. PACE uses UV:visible ratios to separate organic matter from algae</li>
            <li>üî¨ <strong>Red/NIR bands (600-890nm)</strong> ‚Äî Sediment scatters these wavelengths differently than algae. Hyperspectral detail reveals composition</li>
            <li>üìê <strong>Polarimetry</strong> ‚Äî PACE's polarimeters measure light polarization to separate surface glint from water-leaving signal</li>
            <li>üßÆ <strong>AI algorithms</strong> ‚Äî Machine learning trained on coastal field data deconvolves mixed signals</li>
          </ul>

          <p><strong>Applications:</strong> Beach water quality, fisheries habitat, coral reef monitoring, river plume tracking, harmful algae in estuaries!</p>
        `,
        source: 'Coastal Ocean Optics ‚Ä¢ PACE Validation Studies'
      },
      climate: {
        title: 'PACE's Critical Climate Role',
        content: `
          <p><strong>PACE is NASA's "missing link" for understanding ocean-atmosphere-climate connections.</strong> Oceans drive 50% of climate regulation!</p>

          <div class="ai-metrics-grid">
            <div class="ai-metric-card">
              <div class="ai-metric-value">50%</div>
              <div class="ai-metric-label">O‚ÇÇ Production</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">30%</div>
              <div class="ai-metric-label">CO‚ÇÇ Absorbed</div>
            </div>
            <div class="ai-metric-card">
              <div class="ai-metric-value">10yr</div>
              <div class="ai-metric-label">Mission Life</div>
            </div>
          </div>

          <p><strong>Why Climate Scientists Need PACE:</strong></p>
          <ul>
            <li><strong>Phytoplankton Trends</strong> ‚Äî Are ocean "forests" shrinking due to warming? PACE provides continuous 10-year record to detect long-term changes</li>
            <li><strong>Biological Pump</strong> ‚Äî How much carbon reaches deep ocean vs recycled at surface? PACE particle size data answers this</li>
            <li><strong>Aerosol-Cloud-Ocean</strong> ‚Äî PACE's polarimeters measure atmospheric particles affecting clouds. Clouds regulate Earth temperature!</li>
            <li><strong>Ecosystem Shifts</strong> ‚Äî Warming waters favor different plankton species. PACE tracks "winner/loser" species to predict food web changes</li>
          </ul>

          <p><strong>Critical Feedbacks PACE Monitors:</strong></p>
          <ul>
            <li>üå°Ô∏è <strong>Warming ‚Üí Stratification</strong> ‚Äî Hot surface water blocks nutrient mixing. Less nutrients = less phytoplankton = less CO‚ÇÇ absorption (bad!)</li>
            <li>üåä <strong>Ice Loss ‚Üí Blooms</strong> ‚Äî Arctic ice melt exposes ocean to sunlight. Massive blooms = more CO‚ÇÇ sink (good, but also changes ecosystems)</li>
            <li>‚òÅÔ∏è <strong>Plankton ‚Üí Clouds</strong> ‚Äî Some species emit DMS gas that seeds clouds. More clouds = cooler Earth. PACE tracks this!</li>
            <li>üêü <strong>Food Web Collapse</strong> ‚Äî If key plankton species disappear, fisheries crash. PACE provides early warning</li>
          </ul>

          <p><strong>Bottom Line:</strong> We can't predict future climate without understanding oceans. PACE gives us "ocean color vision" to see changes invisible to previous satellites!</p>
        `,
        source: 'IPCC AR6 Reports ‚Ä¢ NASA Earth Observatory'
      }
    };

    // Question card click handlers
    document.querySelectorAll('.question-card').forEach(card => {
      card.addEventListener('click', function() {
        const question = this.dataset.question;
        const response = aiResponses[question];
        
        const aiArea = document.getElementById('aiResponseArea');
        
        // Show loading state
        aiArea.innerHTML = `
          <div class="ai-thinking">
            <div class="ai-thinking-icon loading-gradient" style="border-radius:50%;width:60px;height:60px;margin:0 auto 16px;">ü§ñ</div>
            <p><strong>AI is analyzing NASA PACE data...</strong></p>
          </div>
        `;

        // Simulate AI thinking delay
        setTimeout(() => {
          aiArea.innerHTML = `
            <div class="ai-answer">
              <div class="ai-answer-header">
                <span class="ai-badge">NASA PACE AI</span>
                <span class="ai-answer-title">${response.title}</span>
              </div>
              <div class="ai-answer-body">
                ${response.content}
              </div>
              <div class="ai-footer">
                <div class="ai-source">üìä Data sources: ${response.source}</div>
                <button class="ask-another" onclick="document.getElementById('aiResponseArea').scrollIntoView({behavior:'smooth'});">Ask Another Question</button>
              </div>
            </div>
          `;
        }, 1500);
      });
    });

    console.log('üõ∞Ô∏è Ocean Explorer Pro with PACE AI loaded!');
  </script>
</body>
</html>
